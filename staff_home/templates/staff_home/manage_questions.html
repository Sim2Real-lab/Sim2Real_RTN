{% extends "staff_home/base.html" %}
{% load static %}
{% block content %}
<h2 style="color:white;">Questions for "{{ test.title }}"</h2>

<!-- ✅ Flash Messages -->
{% if messages %}
  <div class="mt-2">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  </div>
{% endif %}

<!-- ✅ Test details summary -->
<div class="card mb-4">
  <div class="card-body">
    <p><strong>Description:</strong> {{ test.description|default:"No description provided" }}</p>
    <p><strong>Code:</strong> {{ test.code }}</p>
    <p><strong>Duration:</strong> {{ test.duration }} minutes</p>
    <p><strong>Start:</strong> {{ test.start_datetime }}</p>
    <p><strong>End:</strong> {{ test.end_datetime }}</p>
    <p><strong>Visible:</strong> {{ test.is_visible|yesno:"Yes,No" }}</p>
  </div>
</div>

<a href="{% url 'add_question' test.id %}" class="btn btn-primary mb-3">+ Add Question</a>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Text</th>
      <th>Type</th>
      <th>Marks</th>
      <th>Negative Marks</th>
      <th>Compiler</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {% for q in questions %}
    <tr>
      <td>{{ q.text }}</td>
      <td>{{ q.question_type }}</td>
      <td>{{ q.marks }}</td>
      <td>{{ q.negative_marks }}</td>
      <td>{{ q.compiler_enabled|yesno:"Yes,No" }}</td>
      <td>
        <a href="{% url 'edit_question' q.id %}" class="btn btn-sm btn-warning">Edit</a>
        <a href="{% url 'delete_question' q.id %}" class="btn btn-sm btn-danger">Delete</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="6">No questions added yet.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<a href="{% url 'list_tests' %}" class="btn btn-secondary mt-3">Back to Tests</a>
{% endblock %}
